{
    "sourceFile": "components/PaymentOverlay.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1762350525708,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1762350525708,
            "name": "Commit-0",
            "content": "import React, { useEffect } from \"react\";\r\nimport { View, Image, Text, TouchableOpacity } from \"react-native\";\r\nimport * as Brightness from \"expo-brightness\";\r\nimport { useKeepAwake } from \"expo-keep-awake\";\r\n\r\ntype Props = { visible: boolean; qrUrl?: string | null; onClose: () => void; };\r\n\r\nexport default function PaymentOverlay({ visible, qrUrl, onClose }: Props) {\r\n  useKeepAwake(); // keep screen on while visible\r\n\r\n  useEffect(() => {\r\n    let prev: number | null = null;\r\n    (async () => {\r\n      if (!visible) return;\r\n      try {\r\n        const sys = await Brightness.getSystemBrightnessAsync();\r\n        prev = sys;\r\n        await Brightness.setSystemBrightnessAsync(1); // max brightness for scanning\r\n      } catch {}\r\n    })();\r\n    return () => {\r\n      if (prev !== null) Brightness.setSystemBrightnessAsync(prev).catch(() => {});\r\n    };\r\n  }, [visible]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <View style={{ position: \"absolute\", inset: 0, backgroundColor: \"#000\", justifyContent: \"center\", padding: 16 }}>\r\n      {qrUrl ? (\r\n        <Image source={{ uri: qrUrl }} resizeMode=\"contain\" style={{ width: \"100%\", height: \"80%\" }} />\r\n      ) : (\r\n        <Text style={{ color: \"#fff\", textAlign: \"center\", marginBottom: 12 }}>No QR uploaded</Text>\r\n      )}\r\n      <TouchableOpacity onPress={onClose} style={{ marginTop: 12, padding: 12, backgroundColor: \"#111827\", borderRadius: 8 }}>\r\n        <Text style={{ color: \"#fff\", textAlign: \"center\", fontWeight: \"600\" }}>Close</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n"
        }
    ]
}